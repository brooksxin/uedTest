<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>查询demo</title>
<link rel="stylesheet" type="text/css" href="alice.css">
<link rel="stylesheet" type="text/css" href="jquery-easyui-1.4/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="common.css">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="handlebars/1.0.rc.3/handlebars.js"></script>
<script type="text/javascript" src="handlebars/1.0.rc.3/helpers.js"></script>
<script type="text/javascript" src="ajaxform/3.2.3/jquery.form.js"></script>
<script type="text/javascript" src="jquery-easyui-1.4/jquery.easyui.min.js"></script>
<script type="text/javascript" src="common.js"></script>
</head>
<body>

<!--顶部-->
<div class="global-top">
	<!--左侧logo-->
	<div class="logo"></div>

	<!--右侧按钮-->
	<div class="is-log-in">
        <div class="ui-button-dropdown ui-button-dropdown-diy fn-mr-20" id="G_userInfo">
			<a class="ui-button ui-button-swhite ui-dbutton ui-dbutton-white">
			    <span class="ui-dbutton-self fn-text-overflow">
			    	<i class="iconfont" title="用户"></i>
			    	<span>李四</span>
			    </span>
			    <i class="ui-dbutton-arrow iconfont" title="下三角形"></i>
			</a>
		    <ul class="ui-button-dropdown-small fn-hide">
		        <li class="ui-button-dropdown-item"><a href="javascript:;" id="userBaseInfo">基本资料</a></li>
		        <li class="ui-button-dropdown-item"><a href="javascript:;" data-idx="2">找回密码</a></li>
		        <li class="ui-button-dropdown-item"><a href="javascript:;" data-idx="3">退出</a></li>
		    </ul>
		    <input type="hidden" id="G_userInfoVal" value="1"/>
		</div>
		<a class="ui-button ui-button-green fn-mr-20" href="javascript:;" hidefocus="true" id="">
			<i class="iconfont" title="联系邮箱"></i>
			<span>站内通知</span><em class="fn-high">12</em>
		</a>
	</div>
</div>

<!--中间大菜单-->
<div class="menu-bar">
	<ul>
		<li>
			<a class="icon cur" href="javascript:;" hidefocus="true" id=""><i class="iconfont" title="首页"></i><span>首页</span></a>
		</li>
		<li>
			<a class="icon" href="javascript:;" hidefocus="true" id=""><i class="iconfont" title="开发文档"></i><span>开发文档</span></a>
		</li>
		<li>
			<a class="icon" href="javascript:;" hidefocus="true" id=""><i class="iconfont" title="帮助中心"></i><span>帮助中心</span></a>
		</li>
		<li>
			<a class="icon" href="javascript:;" hidefocus="true" id=""><i class="iconfont" title="管理中心"></i><span>管理中心</span></a>
		</li>
	</ul>
</div>

<!--body-->
<div class="content">
	<!--左侧menu-->
    <div class="content-menu fn-clear" id="contentMenu">
    	
    </div>

    <!--右侧主部分-->
    <div class="content-wrap">
		<h1 class="form-title">我的任务查询</h1>
		<form id="J_formSearch" name="J_formSearch">
			<table class="search_table" cellpadding="0" cellspacing="0" border="0" width="100%">
				<tbody>
					<tr>
						<td width="11%"><label class="description" for="J_BRAND_ID">下拉框：</label></td>
						<td width="22%">
							<select class="easyui-combobox" name="J_BRAND_ID" id="J_BRAND_ID" style="width: 140px; height: 30px;">
						        <option value="AL">Alabama</option>
						        <option value="AK">Alaska</option>
						        <option value="CA">California</option>
						        <option value="CO">Colorado</option>
						    </select>
						</td>
						<td width="11%"><label class="description" for="J_begin_date">起始时间：</label></td>
						<td width="22%">
							<input id="J_begin_date" name="J_begin_date" style="width:140px; height: 30px;">
						</td>
						<td width="11%"><label class="description" for="J_end_date">结束时间：</label></td>
						<td width="22%">
							<input id="J_end_date" name="J_end_date" class="easyui-datebox" style="width:140px; height: 30px;">
						</td>
					</tr>
					<tr>
						<td width="11%"><label class="description" for="">输入框：</label></td>
						<td width="22%">
							<input type="text" id="" class="ui-input easyui-textbox" data-options="required:true" />
						</td>
						<td width="11%"><label class="description" for="">树：</label></td>
						<td width="22%">
							<input type="text" id="treeDemo" class="easyui-combotree" style="width:140px; height: 30px;" />
						</td>
					</tr>
					<tr>
						<td colspan="6">
							<a class="ui-button ui-button-blue fn-right search-btn" href="javascript:;" hidefocus="true" id="J_search">
								<i class="iconfont" title="查询/搜索"></i>
								<span>查 询</span>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
		</form>

		<!-- 下面表格使用 grid 控件  -->
		<div class="tablewidth" id="tablewidth">
			<!--顶部工具条-->
			<div class="toolbar fn-right">
				<a class="ui-button ui-button-blue fn-mr-20" href="javascript:;" hidefocus="true" id="delRows"><span>删 除</span></a>
				<a class="ui-button ui-button-blue fn-mr-20" href="javascript:;" hidefocus="true" id=""><span>反 选</span></a>
				<a class="ui-button ui-button-blue fn-mr-20" href="javascript:;" hidefocus="true" id=""><span>提取任务</span></a>
				<a class="ui-button ui-button-blue fn-mr-20" href="javascript:;" hidefocus="true" id=""><span>还任务</span></a>
				<a class="ui-button ui-button-blue fn-mr-20" href="javascript:;" hidefocus="true" id=""><span>打印</span></a>
				<a class="ui-button ui-button-blue" href="javascript:;" hidefocus="true" id=""><span>导出</span></a>
			</div>

			<!-- table start -->
			<table id="tradeRecordsIndex" name="tradeRecordsIndex" class="ui-record-table" width="99%"></table>
		</div>
		<!-- 右侧内容 end -->

		<!--底部波浪-->
		<div class="foot-bolang"></div>
    </div>

    <!--底部logo-->
    <div class="globe-foot">
    	<span>版权信息</span>
    </div>
</div>

<div id="testWindow" class="fn-hide">
	你好
	<input type="text" id="" class="ui-input" />
</div>

<textarea class="fn-hide" id="menu_tpl">
<ul class="ui-accordion">
{{#each this}}
<li>
	<a class="menu-tit {{if_first @index}}" href="javascript:;" hidefocus="true" id=""><span>{{title}}</span></a>
	<ul class="sub-item">
		{{#each item}}
		<li>
			<a href="{{url}}" hidefocus="true"><span>{{name}}</span></a>
		</li>
		{{/each}}
	</ul>
</li>
{{/each}}
</ul>
</textarea>


<script type="text/javascript">
$(function(){

	$("#J_begin_date").datetimebox({editable:false});

	//查询
	getPagination();

	$("#J_search").click(function(){
		alert($("#J_begin_date").datebox('getValue'))
		var str = $("#J_formSearch").serialize(); //把form序列化
		var dataP = {
			str: str
		};
		getPagination(dataP);
	});


	//下拉框树demo
	$("#treeDemo").combotree({
	    url: "tree.json",
	    onSelect: function(obj){
	    	console.log(obj)
	    },
	    onLoadError: function(x){
	    	alert("加载下拉框树失败！");
	    }
	});

	$("#delRows").click(function(){
		var rows = $('#tradeRecordsIndex').datagrid("getSelections");	//获取你选择的所有行
		if(rows.length){
			for(var i =0;i<rows.length;i++){
			    var index = $('#tradeRecordsIndex').datagrid('getRowIndex',rows[i]);//获取某行的行号
			    $('#tradeRecordsIndex').datagrid('deleteRow',index);	//通过行号移除该行
			}
		}
	})
});

function getPagination(dataP){
	$('#tradeRecordsIndex').datagrid({
		url: 'paginationTest.json?1=1',
		fitColumns: true,
		nowrap:false,
		queryParams: dataP,
		columns:[[
			{field:'ck',checkbox:true,width:'3%'},//显示多选列
			{field:'itemid',title:'ID',width:'12%',align:'left'},
			{field:'productid',title:'productid',width:'15%',align:'left'},
			{field:'listprice',title:'listprice',width:'15%',align:'left'},
			{field:'unitcost',title:'unitcost',width:'15%',align:'left'},
			{field:'attr1',title:'attr1',width:'15%',align:'left'},
			{field:'status',title:'状态',width:'24%'}
		]],
		singleSelect:false,//是否可多选
		pagination:true,
		pagePosition:'bottom',
		pageSize:10,    // 每页显示的记录条数，默认为10  
		pageList:[20,40,60], //可以设置每页记录条数的列表  
		rownumbers:true
	}).datagrid('getPager').pagination({ 
        beforePageText: '第',//页数文本框前显示的汉字  
        afterPageText: '页    共 {pages} 页',  
        displayMsg: '当前显示 {from} - {to} 条记录，共 {total} 条记录'
	});
}

Handlebars.registerHelper("if_first", function(index, fn) {
	if(index==0){
		return "cur";
	}
	return;
});
</script>
</body>
</html>